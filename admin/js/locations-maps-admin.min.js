(function(e){function f(){var i=document.getElementById("_map_lat").value,h=document.getElementById("_map_lng").value}function d(){e("#get_geoloc").on("click",function(q){var t=e("#_map_address").val()||"",n=e("#_map_city").val()||"",h=e("#_map_state").val()||"",i=e("#_map_zip").val()||"",k=e("#_map_country").val()||"",r=e("#_map_phone").val()||"",s=e("#_map_hours").val()||"",j=e("#_map_placeID").val()||"",o=e("#map_api_key").val()||"";if(o===""){alert("You must enter in an API Key. Please head to the Settings page located under this post type! Stopping Function.");return false}var l=t!==""?t.replace(/\s/g,"+")+",+":"",p=n!==""?n.replace(/\s/g,"+")+",+":"",m=h!==""?h+",+":"",u=i!==""?i+",+":"",v=k!==""?k.replace(/\s/g,"+")+",+":"";e("#map-loading").addClass("show");e(".map-row").addClass("loading");e(".map-field input, .map-field.disabled input").prop("readonly",true);e.ajax({url:"https://maps.googleapis.com/maps/api/geocode/json?address="+l+p+m+u+v+"&key="+o,method:"GET",dataType:"json",complete:function(){e("#map-loading").removeClass("show");e(".map-row").removeClass("loading");e(".map-field:not(.readonly) input").prop("readonly",false)},success:function(z){var A=z.results[0].geometry.location.lat,x=z.results[0].geometry.location.lng,w=z.results[0].place_id;document.getElementById("lat_text").value=A;document.getElementById("lng_text").value=x;document.getElementById("_map_lat").value=A;document.getElementById("_map_lng").value=x;document.getElementById("_map_placeID").value=w;var y={_ajax_nonce:MAP_ADMIN.nonce,action:"geo_cb",address:t,city:n,state:h,zip:i,country:k,lat:A,lng:x,phone:r,hours:s,placeID:w,id:e("#get_geoloc").data("postid")};e.post(MAP_ADMIN.adminURL,y,function(B){alert("Address and Geocode Saved! Please be sure to hit Update if you made any other content changes.")})},error:function(w){alert("You must enter in an API Key. Please head to the Settings page located under this post type! Stopping Function.")}})})}function b(){e("#save_address").on("click",function(){var r=document.getElementById("_map_address").value||"",m=document.getElementById("_map_city").value||"",h=document.getElementById("_map_state").value||"",i=document.getElementById("_map_zip").value||"",k=document.getElementById("_map_country").value||"",o=document.getElementById("_map_lat").value||"",p=document.getElementById("_map_lng").value||"",n=document.getElementById("_map_phone").value||"",q=document.getElementById("_map_hours").value||"",j=document.getElementById("_map_placeID").value||"";var l={_ajax_nonce:MAP_ADMIN.nonce,action:"geo_cb",address:r||"",city:m||"",state:h||"",zip:i||"",country:k||"",lat:o||"",lng:p||"",placeID:j||"",phone:n||"",hours:q||"",id:e("#get_geoloc").data("postid")};e.post(MAP_ADMIN.adminURL,l,function(s){alert('Address saved. If you haven\'t already, click "Get Location" to get the Latitude and Longitude.')})})}function a(){e("#geo_reset").on("click",function(){var j=document.getElementById("_map_address").value||"",o=document.getElementById("_map_city").value||"",m=document.getElementById("_map_state").value||"",l=document.getElementById("_map_zip").value||"",n=document.getElementById("_map_country").value||"",i=document.getElementById("_map_phone").value||"",h=document.getElementById("_map_hours").value||"";document.getElementById("lat_text").value="";document.getElementById("lat_text").value="";document.getElementById("_map_lat").value="";document.getElementById("_map_lng").value="";document.getElementById("_map_placeID").value="";var k={_ajax_nonce:MAP_ADMIN.nonce,action:"geo_cb",address:j||"",city:o||"",state:m||"",zip:l||"",country:n||"",lat:"",lng:"",placeID:placeID||"",phone:i||"",hours:h||"",id:e("#get_geoloc").data("postid")};e.post(MAP_ADMIN.adminURL,k,function(p){alert("Geocode Deleted!")})})}function c(j){for(var h=0;h<j.childNodes.length;h++){var k=j.childNodes[h];if(k.tagName){switch(k.tagName.toLowerCase()){case"input":switch(k.type){case"radio":case"checkbox":k.checked=false;break;case"button":case"submit":case"image":break;case"hidden":switch(k.id){case"map_api_key":break;default:k.value="";break}break;default:k.value="";break}break;case"select":k.selectedIndex=0;break;case"textarea":k.innerHTML="";break;default:c(k)}}}}function g(){e("#form-reset").on("click",function(){c(document.getElementById("map-elements"));var h={_ajax_nonce:MAP_ADMIN.nonce,action:"geo_cb",address:"",city:"",state:"",zip:"",country:"",lat:"",lng:"",phone:"",hours:"",placeID:"",id:e("#get_geoloc").data("postid")};e.post(MAP_ADMIN.adminURL,h,function(i){alert("Data Reset! Please make sure to save the post to update all the address fields..")})})}if(e("body").hasClass("post-type-locations")){d();b();a();g();console.log("click")}})(jQuery);