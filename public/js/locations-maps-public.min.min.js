function tooltipBuild(g){var h=g.title,f=g.address,e=g.url;return'<div class="marker-infowindow"><div class="title">'+h+"</div>"+placeAddress(f)+'<div class="link"><a href="'+e+'" target="_blank" rel="noopener">View on Google Maps</a></div></div>'}function placeAddress(i){var h=i.address,j=i.city,l=i.state,g=i.zip,k=i.country;return'<div class="address"><p>'+h+"</p><p>"+j+" "+l+" "+g+"</p><p>"+k+"</p></div>"}function CustomMarker(c,d){this.latlng=c;this.setMap(d)}var map;var mapElement=jQuery(".map-container").attr("id");var postsURL="/wp-json/wp/v2/locations?per_page=100";var zoom=MAP_VARS.mapZoom||8;var icon=MAP_VARS.mapIcon;var hoverIcon=MAP_VARS.mapHoverIcon||"";var style=MAP_VARS.mapStyling;var single=typeof MAP_VARS.post_id?MAP_VARS.post_id:"no";var defaultIcon=MAP_VARS.mapIcon;var popup=MAP_VARS.mapPopup||"";var prev_infowindow=false;var label=1;var markers=[];var markerArray=[];var count;var items;var noInfoWindow=MAP_VARS.mapDisableInfowindow||"yes";var center;function initMap(){if(jQuery.isNumeric(single)){postsURL="/wp-json/wp/v2/locations/"+single}center=new google.maps.LatLng(MAP_VARS.mapCenterLat,MAP_VARS.mapCenterLng);map=new google.maps.Map(document.getElementById(mapElement),{zoom:parseInt(zoom),center:center,disableDefaultUI:true,streetViewControl:false,mapTypeControl:false,draggable:false,zoomControl:false,scrollwheel:false,disableDoubleClickZoom:true,mapTypeIds:["styledMap"]});jQuery.getJSON(style,function(d){var a=new google.maps.StyledMapType(d,{name:"Custom Map Styling"});map.mapTypes.set("styledMap",a);map.setMapTypeId("styledMap")});if(single==="no"){jQuery.ajax({url:postsURL,method:"GET",success:function(l){var a,n,i=1,k="",o="",m=new google.maps.LatLngBounds(),p=9999;l.forEach(function(x){var c=new google.maps.LatLng(x.map_fields._map_lat,x.map_fields._map_lng);m.extend(c);var f=new google.maps.Marker({position:c,map:map,icon:defaultIcon||icon});var d=x.map_fields._map_address[0]!==""?x.map_fields._map_address[0].replace(/\s/g,"+")+"+":"";var u=x.map_fields._map_city[0]!==""?x.map_fields._map_city[0].replace(/\s/g,"+")+"+":"";var e=x.map_fields._map_state[0]!==""?x.map_fields._map_state[0]+"+":"";var w=x.map_fields._map_zip[0]!==""?x.map_fields._map_zip[0]+"+":"";var v=d+u+e+w;var j={title:x.title.rendered||x.name||"",address:{address:x.map_fields._map_address,city:x.map_fields._map_city+","||"",state:x.map_fields._map_state||"",zip:x.map_fields._map_zip||""},url:"https://www.google.com/maps/search/?api=1&query="+v+"&query_place_id="+x.map_fields._map_placeID+">"};if(popup!==false){var g=tooltipBuild(j);var h=new google.maps.InfoWindow({content:g});google.maps.event.addListener(f,"click",(function(r,q){return function(){if(!jQuery.isEmptyObject(prev_infowindow)){prev_infowindow.close()}h=new google.maps.InfoWindow({content:g});prev_infowindow=h;h.open(map,r)}})(f,n))}if(hoverIcon.length){f.addListener("mouseover",function(){f.setIcon(MAP_VARS.hoverIcon)});f.addListener("mouseout",function(){f.setIcon(defaultIcon)});f.addListener("click",function(){f.setIcon(MAP_VARS.hoverIcon)})}f.setVisible(true);markers.push(f);f.setZIndex(google.maps.Marker.MAX_ZINDEX+1);if(x.id===29){f.setZIndex(9999999999)}google.maps.event.addListener(map,"click",function(){h.close()})})},error:function(e,a,f){console.log("error");console.log(e);console.log(a);console.log(f)}})}else{if(!isNaN(single)){var b=new google.maps.Marker({position:center,icon:icon});b.setMap(map)}}};